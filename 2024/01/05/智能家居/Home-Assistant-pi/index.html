<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>树莓派4b Home Assistant | 白菜君の技术库</title>

  
  <meta name="author" content="白菜(whiteCcinn)">
  

  
  <meta name="description" content="知道做不到，等于不知道">
  

  
  <meta name="keywords" content="白菜,文辉,技术博客,whiteCcinn">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="树莓派4b Home Assistant"/>

  <meta property="og:site_name" content="白菜君の技术库"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="白菜君の技术库" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">白菜君の技术库</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives/">文章</a></li>
      
        <li><a href="/tags/">标签</a></li>
      
        <li><a href="/categories/">分类</a></li>
      
        <li><a href="/about/">关于我</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>树莓派4b Home Assistant</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2024/01/05/智能家居/Home-Assistant-pi/" rel="bookmark">
        <time class="entry-date published" datetime="2024-01-04T16:00:19.000Z">
          2024-01-05
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前面做了几期关于<code>Home assistant</code>的教程，在前面我是完全使用docker手动部署，并且采用基本都是通过安装<code>home-assistant-core</code>去处理。后面我发现很多东西的使用方式都特别别扭，而且确实很多东西都比较麻烦，所以后面再反过来看，发现了一个叫<code>hass</code>的生态，这个其实就是<code>home-assistant</code>的周边生态，而这些周边，几乎都是必备的，于是我妥协了使用了<code>hass</code>的生态，但是有一点不同的是，我这里并没有使用<code>hassOS</code>，而是采用<code>hassIO</code>，也就是<code>home-assistant-supervisor</code>。</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-install-compare.jpg" alt="ha-install-compare.jpg"></p>
<p>下面开始，我就会我的正式体现记录我后面的智能家居做法。</p>
<a id="more"></a>

<h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><ul>
<li>树莓派4b+一个（我在写这篇文章的时候，已经出了树莓派5，但是由于ha还没公布稳定支持树莓派5，所以我还是购入了4b+，后面稳定后再替换）</li>
</ul>
<h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/pi-ha-docker.jpg" alt="pi-ha-docker"></p>
<h2 id="Home-Assistant-Supervisor-安装"><a href="#Home-Assistant-Supervisor-安装" class="headerlink" title="Home Assistant Supervisor 安装"></a>Home Assistant Supervisor 安装</h2><h3 id="切换为root用户"><a href="#切换为root用户" class="headerlink" title="切换为root用户"></a>切换为root用户</h3><p><code>ccinn@raspberrypi:~ $ sudo su -</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update -y</span><br><span class="line">sudo apt upgrade -y</span><br></pre></td></tr></table></figure>

<p>查看树莓派版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Debian</span><br><span class="line">Description:	Debian GNU/Linux 12 (bookworm)</span><br><span class="line">Release:	12</span><br><span class="line">Codename:	bookworm</span><br></pre></td></tr></table></figure>

<p>如果要完整支持<code>Home Assistant Supervised</code>，最好根据 <img src="https://www.home-assistant.io/more-info/unsupported/os" alt="Home Assistant Supervised官方支持系统说明查"> 看本地的系统是否满足</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-install-condition.jpg" alt="ha-install-condition"></p>
<p>可以看到，截止到文章发布，官方文档说明是需要Debian12，我的树莓派系统是满足的。</p>
<h3 id="NetworkManager"><a href="#NetworkManager" class="headerlink" title="NetworkManager"></a>NetworkManager</h3><p>HomeAssistantSupervised需要NetworkManager的支持，树莓派官方使用的是ModemManager、openresolv和dhcpcd5。</p>
<p>原本的配置可以不动，但是需要固定Mac地址并禁用ModemManger。</p>
<p>因为NetworkManager一旦安装就会开始工作。所以我们先创建一个NetworkManager的配置文件来固定Mac地址，防止我们后续操作重启时候，树莓派的Mac地址频繁变更。</p>
<h4 id="固定Mac地址"><a href="#固定Mac地址" class="headerlink" title="固定Mac地址"></a>固定Mac地址</h4><p>预编写NetworkManager的配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建配置目录和文件</span></span><br><span class="line">sudo mkdir -p /etc/NetworkManager/conf.d/</span><br><span class="line"><span class="comment"># 对文件追加内容</span></span><br><span class="line">sudo vim /etc/NetworkManager/conf.d/100-disable-wifi-mac-randomization.conf</span><br></pre></td></tr></table></figure>

<p>追加的内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[connection]</span><br><span class="line">wifi.mac-address-randomization=1</span><br><span class="line"></span><br><span class="line">[device]</span><br><span class="line">wifi.scan-rand-mac-address=no</span><br></pre></td></tr></table></figure>

<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-network-manager.jpg" alt="ha-network-manager"></p>
<p>之后就可以安装network-manager了。</p>
<blockquote>
<p>安装完Network-Manager后，网络可能会出现短暂的丢包。这个时候多等一下就好，并且在完成ModemManager的禁用前，请勿重启树莓派系统！！！</p>
</blockquote>
<p>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y network-manager</span><br></pre></td></tr></table></figure>

<h3 id="禁用ModemManager"><a href="#禁用ModemManager" class="headerlink" title="禁用ModemManager"></a>禁用ModemManager</h3><p>有些教程会让你卸载<code>dhcpcd5</code>，但是这样重启后需要重新配置网络，并且不能用树莓派的方法配置，这让我这没有显示器的用户很苦恼……所以这里我们就不卸载<code>dhcpcd5</code>，直接禁用<code>ModemManager</code>即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止ModemManager</span></span><br><span class="line">sudo systemctl stop ModemManager</span><br><span class="line"><span class="comment"># 禁止ModemManager开机自启</span></span><br><span class="line">sudo systemctl <span class="built_in">disable</span> ModemManager</span><br></pre></td></tr></table></figure>

<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-modem-manager.jpg" alt="ha-modem-manager"></p>
<p>到此，NetworkManager部分就准备好了。</p>
<h3 id="Apparmor"><a href="#Apparmor" class="headerlink" title="Apparmor"></a>Apparmor</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y apparmor-utils jq software-properties-common apt-transport-https avahi-daemon ca-certificates curl dbus socat</span><br></pre></td></tr></table></figure>

<p>但是需要注意，需要把Apparmor的启动配置参数加到树莓派的启动参数内（参考自：<a href="https://github.com/Kanga-Who/home-assistant/issues/25）：" target="_blank" rel="noopener">https://github.com/Kanga-Who/home-assistant/issues/25）：</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用vim打开/boot/cmdline.txt</span></span><br><span class="line">sudo vim /boot/cmdline.txt</span><br></pre></td></tr></table></figure>

<p>末尾添加：<code>apparmor=1 security=apparmor</code></p>
<h3 id="OS-Agent"><a href="#OS-Agent" class="headerlink" title="OS-Agent"></a>OS-Agent</h3><p>还需要安装OS Agent。这个并没有在Debian的软件源内，所以我们需要使用<code>dpkg安装</code>。最新OS Agent的下载地址：<a href="https://github.com/home-assistant/os-agent/releases/latest" target="_blank" rel="noopener">https://github.com/home-assistant/os-agent/releases/latest</a></p>
<blockquote>
<p>记得找最新的aarch版</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载OS Agent 1.2.2</span></span><br><span class="line">wget https://github.com/home-assistant/os-agent/releases/download/1.2.2/os-agent_1.2.2_linux_aarch64.deb</span><br><span class="line"><span class="comment"># 使用dpkg安装</span></span><br><span class="line">sudo dpkg -i os-agent_1.2.2_linux_aarch64.deb</span><br></pre></td></tr></table></figure>

<h3 id="其他依赖"><a href="#其他依赖" class="headerlink" title="其他依赖"></a>其他依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">vim \</span><br><span class="line">jq \</span><br><span class="line">wget \</span><br><span class="line">curl \</span><br><span class="line">udisks2 \</span><br><span class="line">libglib2.0-bin \</span><br><span class="line">dbus -y</span><br></pre></td></tr></table></figure>

<p>在2022.11.27后Homeassistant正式需要<code>Systemd Journal</code>的支持；我们同样可以使用软件包管理器进行安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install systemd-journal-remote -y</span><br></pre></td></tr></table></figure>

<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载Docker安装脚本</span></span><br><span class="line">sudo curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line"><span class="comment"># 使用阿里镜像源下载并安装Docker</span></span><br><span class="line">sudo sh get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure>

<p>把我们自带的<code>ccinn用户</code>添加到<code>docker用户组</code>内：</p>
<blockquote>
<p>这个用户根据自己的实际用户来<br>有的人默认就是pi用户</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker ccinn</span><br></pre></td></tr></table></figure>

<h3 id="重启设备"><a href="#重启设备" class="headerlink" title="重启设备"></a>重启设备</h3><p>上诉操作，我们已经<code>重新配置了网络</code>、<code>安装了依赖</code>和<code>添加了启动参数</code>，所以在正式安装<code>Home Assisistant Supervised</code>前，我们需要重启设备。</p>
<h3 id="Supervised"><a href="#Supervised" class="headerlink" title="Supervised"></a>Supervised</h3><p>现在开始安装<code>Home Assisistant Supervised</code>啦。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载deb安装包</span></span><br><span class="line">wget https://github.com/home-assistant/supervised-installer/releases/latest/download/homeassistant-supervised.deb</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line">sudo dpkg -i homeassistant-supervised.deb</span><br></pre></td></tr></table></figure>

<p>之后，没有问题就会出现选项卡，我们选择树莓派4B：</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-install.jpg" alt="ha-install"></p>
<p>安装过程……根据自己的网络，这一步可能会卡很久，如果还是不行，记得科学一下再重新安装。</p>
<h2 id="成果"><a href="#成果" class="headerlink" title="成果"></a>成果</h2><p>使用docker命令，查看<code>Supervised</code>的容器状态（如果并没有Homeassistant容器；那么等10min～20min再试试，期间保持树莓派运行，Homeassistant会组建初始化完成）：</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-docker-ps.jpg" alt="ha-docker-ps"></p>
<p>进入<code>IP:4357</code>，可以查看<code>Supervised</code>的状态：</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-health.jpg" alt="ha-health"></p>
<p>等待5分钟左右（Home Assisistant Supervised第一次启动比较慢），就可以通过<code>IP:8123</code>在浏览器访问了</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-ok.jpg" alt="ha-ok"></p>
<p>至此ha的安装就ok了，接下来会继续一些辅助性的东西。</p>
<h2 id="安装zsh"><a href="#安装zsh" class="headerlink" title="安装zsh"></a>安装zsh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install zsh</span><br><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://gitee.com/shmhlsy/oh-my-zsh-install.sh/raw/master/install.sh)</span>"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在最后一行加入</span></span><br><span class="line"><span class="built_in">export</span> PROMPT=<span class="string">'%n@%m:%F&#123;13&#125;%~ %F&#123;50&#125;%B%# %f%b'</span></span><br></pre></td></tr></table></figure>

<p>如果想要复制ha容器中的配置出来，可以使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp $(docker ps | grep -v NAMES | grep homeassistant | awk <span class="string">'&#123;print $1&#125;'</span>):/config /home/ccinn/.homeassistant/</span><br></pre></td></tr></table></figure>

<p>这样子，<code>/home/ccinn/.homeassistant</code> 目录就是当前的了。</p>
<p>如果我们想要找到hassio中的ha容器挂载的目录是那里的话，可以用以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat /var/lib/docker/containers/$(docker inspect homeassistant | jq -r <span class="string">'.[] | .Id'</span>)/config.v2.json | jq <span class="string">'.MountPoints."/config"'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面为标准的路径</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"Source"</span>: <span class="string">"/usr/share/hassio/homeassistant"</span>,</span><br><span class="line">  <span class="string">"Destination"</span>: <span class="string">"/config"</span>,</span><br><span class="line">  <span class="string">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"Name"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"Driver"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">  <span class="string">"Propagation"</span>: <span class="string">"rprivate"</span>,</span><br><span class="line">  <span class="string">"Spec"</span>: &#123;</span><br><span class="line">    <span class="string">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">    <span class="string">"Source"</span>: <span class="string">"/usr/share/hassio/homeassistant"</span>,</span><br><span class="line">    <span class="string">"Target"</span>: <span class="string">"/config"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"SkipMountpointCreation"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，容器和宿主机的目录地址是<code>/usr/share/hassio/homeassistant</code></p>
<p>所以，当我们需要手动安装插件，修改配置等等，直接操作这个目录即可。</p>
<h2 id="安装-Samba"><a href="#安装-Samba" class="headerlink" title="安装 Samba"></a>安装 Samba</h2><p>我们知道，树莓派是一个小型主机，我们日常使用，肯定有我们自己的主机。我们可以通过Samba服务来进行文件的二次管理。把文件备份到我们的日常使用的主机上，或者直接在我们日常使用的主机上进行操作文件配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install samba samba-common-bin</span><br></pre></td></tr></table></figure>

<p>修改配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/samba/smb.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在文件底部添加</span></span><br><span class="line">[pi]</span><br><span class="line">path = /home/ccinn/.homeassistant</span><br><span class="line">writeable=Yes </span><br><span class="line">create mask=0777 </span><br><span class="line">directory mask=0777 </span><br><span class="line">public=no</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为我上面用的路径和宿主机下的路径不一致，所以需要做个软连接 <code>ln -s /usr/share/hassio/homeassistant /home/ccinn/.homeassistant</code>, 这样子就能实现，samba和树莓派和ha容器的文件实时同步了。</p>
</blockquote>
<p>保存文件后，添加samba用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo smbpasswd -a ccinn</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：使用 sudo smbpasswd -a 命令创建用户时，创建的用户必须为 Linux 系统账户，如我这里的ccinn</p>
</blockquote>
<p>输入自己的samba用户的密码，比如 <code>a123456</code></p>
<p>重启服务让其生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd</span><br></pre></td></tr></table></figure>

<p>Samba 安装完成后，树莓派的 Hass 开发环境搭建完毕。</p>
<h2 id="通过-Samba-访问-Home-Assistant-文件夹"><a href="#通过-Samba-访问-Home-Assistant-文件夹" class="headerlink" title="通过 Samba 访问 Home Assistant 文件夹"></a>通过 Samba 访问 Home Assistant 文件夹</h2><p>因为我的是macOS,所以这里用mac为例子。</p>
<p>在电脑桌面上打开 <code>访达。</code></p>
<p>选择桌面左上角菜单中的 <code>前往 &gt; 连接服务器</code>。</p>
<p>在弹出的窗口中，输入以下地址后单击 <code>连接</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smb://192.168.8.189/pi</span><br></pre></td></tr></table></figure>

<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-sambd.jpg" alt="ha-sambd"></p>
<h2 id="安装hacs"><a href="#安装hacs" class="headerlink" title="安装hacs"></a>安装hacs</h2><p>在树莓派中执行如下命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -U - nttps://get.nacs.xyz | bash -</span><br></pre></td></tr></table></figure>

<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-hacs.jpg" alt="ha-hacs"></p>
<p>可以看到，hacs会自动找到对应的目录进行安装。</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-hacs-1.jpg" alt="ha-hacs-1"></p>
<p>然后外面通过samba，也可以看到在<code>custom_components</code>中多了个hacs的<code>自定义组件</code>。</p>
<p>回到<code>ha-web(IP:8123)</code>中，在用户-集成，添加集成，然后搜索HACS，点击一下hacs，就可以安装hacs了，那么接下来就可以用第三方内容了</p>
<p><img src="/images/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/ha-hacs-2.jpg" alt="ha-hacs-2"></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/智能家居/">智能家居</a>, <a href="/categories/智能家居/树莓派/">树莓派</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/智能家居/">智能家居</a><a href="/tags/Home-Assistant/">Home Assistant</a><a href="/tags/HA/">HA</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2025 白菜(whiteCcinn)
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>